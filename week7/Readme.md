# Week 7: SFT vs DPO Instruction Tuning Experiment
## λ©μ 

SFT(Supervised Fine-Tuning)μ™€ DPO(Direct Preference Optimization)κ°€ μ–΄λ–»κ² λ‹¤λ¥Έ ν•™μµ κ²°κ³Όλ¥Ό λ³΄μ—¬μ£Όλ”μ§€ λΉ„κµν•λ” κ²ƒμ΄ λ³Έ μ‹¤ν—μ λ©μ μ…λ‹λ‹¤.

μ‹¤ν—μ— μ‚¬μ©λ instruction μ£Όμ λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

> ν†µν• μ„Έ κ°μ ν‚¤μ›λ“λ¥Ό λ§μ§€λ§‰μΌλ΅ ν¬ν•¨ν•μ—¬ ν• νΈμ λ¬Έν•™μ μΈ κΈ€μ„ μƒμ„±ν•λ” κ²ƒ

μ΄ νƒ€μ¤ν¬λ” λ‹¨μΌ μ •λ‹µμ΄ μ΅΄μ¬ν•μ§€ μ•κ³ , λ‹¤μ–‘μ„±κ³Ό ν‘ν„λ ¥μ΄ μ”κµ¬λλ” μ ν•μΌλ΅ SFTμ™€ DPOμ μ°¨μ΄λ¥Ό κ²€μ¦ν•κΈ°μ— μ ν•©ν•©λ‹λ‹¤.

---

## μ‹¤ν— κµ¬μ„±

| ν•­λ©            | λ‚΄μ©                             |
| -------------- | -------------------------------- |
| **λ¨λΈ**        | `gemma-3b-it` (1B νλΌλ―Έν„°)       |
| **λ°μ΄ν„° μ**    | μ „μ²΄ 175κ° (ν•™μµ 140 / κ²€μ¦ 35)   |
| **Batch Size** | 8                                |
| **Epochs**     | 5                                |
| **SFT λ°μ΄ν„°**   | `input` / `output`               |
| **DPO λ°μ΄ν„°**   | `prompt` / `chosen` / `rejected` |

### π”— μ½”λ“ λ° λ°μ΄ν„°

* [SFT μ½”λ“](https://drive.google.com/file/d/1JOomO7meDWxhtmPyT0rWkCughDj4yq7S/view?usp=sharing)
* [DPO μ½”λ“](https://drive.google.com/file/d/1SK3tY_XnDfLBtxmgGnErL67KQONkGyus/view?usp=sharing)
* [λ°μ΄ν„°μ…‹](https://drive.google.com/file/d/1vce0jzN1R9iinUkDp2SosnsgilTEo1-s/view?usp=sharing)

---

## μ‹ν— κ²°κ³Ό μ”μ•½

### μ‚¬μ „ μ¶λ ¥

* ν•™μµ μ „ μ¶λ ¥ κ²°κ³Όλ” ν‚¤μ›λ“ λ―Έν¬ν•¨, μΌκ΄€μ„± λ¶€μ΅± λ“± μ „ν•μ μΈ **1B λ¨λΈ μμ¤€**μ ν•κ³„ μ΅΄μ¬

### SFT κ²°κ³Ό

* **μ•…μ„± λ°λ³µ ν„μƒ** λ°μƒ
* λ‹¤μ–‘ν• ν‘ν„μ„ ν¬μ°©ν•μ§€ λ»ν•κ³ , ν•™μµμ΄ μ΄λ£¨μ–΄μ§€μ§€ μ•μ€ λ“±ν• ν¨ν„΄
* λ‹¨μΌ μ •λ‹µλ§μ„ κ°•μ λ΅ ν•™μµμ‹ν‚¤λ” κ²°κ³Όλ΅ ν•΄μ„λ¨

### DPO κ²°κ³Ό

* μ™„μ„±λ„λ” λ‚®μ§€λ§, **λ¬Έν•™μ  κµ¬μ„±κ³Ό ν†µμ— λ€ν• λ°©ν–¥μ„± μλ” ν•™μµ** μ΄λ£¨μ–΄μ§€λƒμ
* μ ν•λ ν•™μµλ‰μ—λ„ λ¶κµ¬ν•κ²ƒμΉκ³  **μ¶λ ¥ κµ¬μ„± μ μ§€**
* μ„ νΈ κΈ°λ° ν•™μµμ΄ μ°½μμ„± νƒ€μ¤ν¬μ— λ” μ ν•©ν•¨μ„ μ‹μƒ

---

## κ²°λ΅ 

* λ™μΌν• λ¨λΈ, λ°μ΄ν„°, μ΅°κ±΄μ—μ„ **SFTμ™€ DPOλ” μ „ν€ λ‹¤λ¥Έ ν•™μµ κ²°κ³Ό**λ¥Ό μ λ™
* νΉν \*\*μ°½μμ  μƒμ„±(task with multiple valid outputs)\*\*μ—μ„λ” DPOκ°€ λ” ν¨κ³Όμ μΈ μ„ νƒμ§€μ„
* ν›„μΌμ—λ” SFTλ¥Ό κΈ°λ°μΌλ΅ λ¨λΈμ„ μ •λ ¥ν• λ’¤, **DPOλ¥Ό μ μ©ν•΄ λ―Έμ„Έν• μ •λ ¥κ³Ό μμ—°μ¤λ¬μ΄ ν™”λ©΄μ„ κ°•ν™”ν•λ” ν•μ΄λΈλ¦¬λ“ λ°©μ‹**μ΄ λ”μ± μΌλ°ν™”λ  κ²ƒμΌλ΅ μμƒ

---

## μ£Όμ” μΈμ‚¬μ΄νΈ

* SFTλ” β€μ •λ‹µμ΄ ν•λ‚μΌ λ•β€ κ°•λ ¥ν•μ§€λ§, μ°½μμ„±μ΄ μ”κµ¬λλ” ν…μ¤ν¬μ—μ„λ” λ¶μ ν•© κ°€λ¥
* DPOλ” β€μ„ νΈβ€ κΈ°λ°μ μ •λ‹µμ΄ κ°€λ¥ν•΄ ν‘ν„ λ‹¤μ–‘μ„±μ΄ μ¤‘μ”ν• ν…μ¤ν¬μ—μ„ μ λ¦¬
* `gemma3-it-1b`Β Β κΈ°λ¶„ λ¨λΈλ„ DPO μ μ© μ‹ μΌμ • μμ¤€μ κµ¬μ„±μ  μΌκ΄€μ„± ν•™μµ κ°€λ¥
