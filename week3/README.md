# Knowledge Distillation ì´í•´ì™€ DeepSeek-R1 ì‚¬ë¡€ ì •ë¦¬

ë³¸ ê¸€ì€ Knowledge Distillation(KD)ì˜ ê°œë…ì  ê¸°ì´ˆë¶€í„° ìµœê·¼ì˜ í™œìš© ì‚¬ë¡€ì¸ DeepSeek-R1ê¹Œì§€ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ì •ë¦¬í•œ ìë£Œì…ë‹ˆë‹¤. KDì˜ ì›ë¦¬ë¥¼ ì´í•´í•˜ê³ , í˜„ëŒ€ ì–¸ì–´ëª¨ë¸ì—ì„œì˜ ì ìš© ë°©ì‹ì˜ ì°¨ì´ë¥¼ íŒŒì•…í•˜ëŠ” ë° ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤.

---

## 1. ê°œê´„

2025ë…„ ì´ˆ ê³µê°œëœ **DeepSeek ëª¨ë¸**ì—ì„œ ê°€ì¥ ì£¼ëª©í•  ë§Œí•œ ì ì€ ì²«ì§¸, R1ì´ë¼ëŠ” ê³ ì„±ëŠ¥ ì¶”ë¡  ëª¨ë¸ì˜ ì†ŒìŠ¤ê°€ ê³µê°œë˜ì—ˆë‹¤ëŠ” ì ê³¼ ë‘˜ì§¸, 671B ê·œëª¨ì˜ ëª¨ë¸ì„ distillation ê¸°ë²•ì„ í†µí•´ íš¨ê³¼ì ìœ¼ë¡œ ê²½ëŸ‰í™”í–ˆë‹¤ëŠ” ì ì´ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ LLM ì‹œì¥ì˜ ê²½ìŸì´ ì¹˜ì—´í•´ì§€ëŠ” ìƒí™©ì—ì„œ ëª¨ë¸ ê²½ëŸ‰í™”ëŠ” ì¤‘ìš”í•œ ëŒíŒŒêµ¬ê°€ ë  ìˆ˜ ìˆë‹¤ëŠ” íŒë‹¨ ì•„ë˜, ì´ë²ˆ ê¸€ì—ì„œëŠ” **Knowledge Distillation ê°œë…**ì„ ë‹¤ì‹œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤.![](https://velog.velcdn.com/images/paradeigma/post/0a51a9a0-f1e7-432a-aefb-768f0876eaeb/image.png)

---

## 2. KDì˜ ì‹œì‘

Knowledge Distillationì€ **Geoffrey Hintonì´ 2014ë…„ NIPS Deep Learning Workshopì—ì„œ ì œì•ˆí•œ ê°œë…**ìœ¼ë¡œ, ë³µì¡í•˜ê³  í° ëª¨ë¸(ë˜ëŠ” ì•™ìƒë¸”)ì˜ ì§€ì‹ì„ ë” ì‘ê³  ê²½ëŸ‰í™”ëœ ëª¨ë¸ë¡œ ì „ì´ì‹œí‚¤ê¸° ìœ„í•œ í•™ìŠµ ë°©ë²•ì…ë‹ˆë‹¤.

> ë³µì¡í•œ ëª¨ë¸ì´ í›ˆë ¨ëœ í›„ì—ëŠ”, ìš°ë¦¬ëŠ” 'ì§€ì‹ ì¦ë¥˜(distillation)'ë¼ê³  ë¶€ë¥´ëŠ” ë‹¤ë¥¸ ì¢…ë¥˜ì˜ í›ˆë ¨ì„ ì‚¬ìš©í•˜ì—¬, ê·¸ ë³µì¡í•œ ëª¨ë¸ë¡œë¶€í„° ë” ë°°í¬ì— ì í•©í•œ ì‘ì€ ëª¨ë¸ë¡œ ì§€ì‹ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2.1 KDì˜ ì´ìœ 

- ë³µì¡í•˜ê³  ì„±ëŠ¥ ì¢‹ì€ ëª¨ë¸ì€ ì¶”ë¡  ì†ë„ê°€ ëŠë¦¬ê³  ë°°í¬ì— ë¶€ì í•©
- ì‘ì€ ëª¨ë¸ì€ ì¶”ë¡ ì´ ë¹ ë¥´ê³  ê°€ë³ì§€ë§Œ ì„±ëŠ¥ì´ ë¶€ì¡±í•¨
- KDëŠ” ì„±ëŠ¥ê³¼ íš¨ìœ¨ì„± ê°„ **íŠ¸ë ˆì´ë“œì˜¤í”„**ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì „ëµìœ¼ë¡œ ë“±ì¥

### 2.2 ì˜ˆì‹œ

- `bert-base-uncased` â†’ `distilbert-base-uncased`  
- ì•½ 109M â†’ ì•½ 67M íŒŒë¼ë¯¸í„° ê°ì†Œ, í•™ìŠµ ëŒ€ìƒì€ 0.59M ìˆ˜ì¤€

![](https://velog.velcdn.com/images/paradeigma/post/923d139c-6f78-4152-ad71-d8ad8fc9470b/image.png)

---

## 3. ì´ˆê¸° ì´ë¡ 

![](https://velog.velcdn.com/images/paradeigma/post/1ae772a4-919b-49f8-a1fc-42063f09cf1a/image.png)

- **ì†ì‹¤ êµ¬ì„±**: KL Divergence + Cross Entropy
- **Temperature ì‚¬ìš©**: í™•ë¥  ë¶„í¬ë¥¼ í‰íƒ„í•˜ê²Œ ë§Œë“¤ì–´ ë¶€ë“œëŸ¬ìš´ label ìƒì„±

![](https://velog.velcdn.com/images/paradeigma/post/7cee6f48-2a91-4397-8638-b33d943df213/image.png)

### 3.1 Temperatureê°€ í•™ìŠµì— ì‚¬ìš©ë¨

![](https://velog.velcdn.com/images/paradeigma/post/59b469cc-6495-422c-94b5-ab49b9e75b4d/image.png)

- T â†‘ â†’ softmax ë¶„í¬ê°€ ë¶€ë“œëŸ¬ì›Œì§ â†’ ë¹„ì£¼ë¥˜ í´ë˜ìŠ¤ ì •ë³´ë„ í•™ìŠµ ê°€ëŠ¥

### 3.2 ì •ë¦¬

| êµ¬ë¶„           | ëª©ì                                        |
| -------------- | ------------------------------------------ |
| KDì—ì„œì˜ ì—­í•   | Soft target ë¶„í¬ í‰íƒ„í™”ë¡œ ë¯¸ì„¸í•œ ì°¨ì´ í•™ìŠµ |
| LLMì—ì„œì˜ ì—­í•  | ë‹¤ì–‘í•œ ì¶œë ¥ ìœ ë„(top-k, sampling ë“±)       |

---

## 4. ì–¸ì–´ëª¨ë¸ì—ì„œì˜ Temperature

![](https://velog.velcdn.com/images/paradeigma/post/b569c06f-d3b2-4f04-b548-dc4450d8404f/image.png)

- ì¶”ë¡  ì‹œì ì—ì„œ ì‚¬ìš©, ìƒì„± ë‹¤ì–‘ì„± í™•ë³´ ëª©ì 
- Top-k, Top-pì™€ ì—°ê³„ë˜ë©´ ë”ìš± ì°½ì˜ì ì¸ ê²°ê³¼ ê°€ëŠ¥

![](https://velog.velcdn.com/images/paradeigma/post/c8a358d0-0cf8-4cd8-89c1-16c8347be258/image.png)

---

## 5. ì–¸ì–´ëª¨ë¸ì—ì„œì˜ Distillation

> DeepSeek-R1ì€ DeepSeek-R1ì´ ìƒì„±í•œ 80ë§Œ ê°œì˜ ìƒ˜í”Œì„ í™œìš©í•˜ì—¬ Qwen ë° Llamaì™€ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë¸ë“¤ì„ SFT ë°©ì‹ìœ¼ë¡œ í•™ìŠµí–ˆë‹¤.

![](https://velog.velcdn.com/images/paradeigma/post/5d9691fc-b138-4a50-bf78-257a06f32c1e/image.png)

- Teacher: ì‚¬ì „í•™ìŠµëœ DeepSeek-R1
- Student: LLaMA, Qwen ê³„ì—´ ëª¨ë¸
- ë°©ë²•: Teacherì˜ ì¶œë ¥ì„ ì •ë‹µìœ¼ë¡œ ê°„ì£¼í•œ SFT

![](https://velog.velcdn.com/images/paradeigma/post/f9ae7607-1f77-40a2-a3fc-6791b8e55e5b/image.png)

---

## 6. í˜„ì¬ì˜ KD ì˜ˆì‹œ

- GPT ê²°ê³¼ë¥¼ ì •ë‹µì²˜ëŸ¼ ì‚¬ìš©í•´ ì†Œí˜• ëª¨ë¸ì„ í•™ìŠµì‹œí‚¤ëŠ” í˜„ëŒ€ì  KD êµ¬ì¡°
- DeepSeek-R1ì€ ì´ ì „ëµì„ ëŒ€ê·œëª¨ë¡œ í™•ì¥í•˜ì—¬ ì„±ê³µí•œ ì‚¬ë¡€

---

## 7. ê²°ë¡ 

- **ì´ˆê¸° KD**: KL + CE + Temperatureë¡œ soft label í•™ìŠµ
- **í˜„ëŒ€ KD**: GPT ë“± LLMì˜ ì‘ë‹µì„ ì •ë‹µìœ¼ë¡œ ê°„ì£¼í•œ SFT ë°©ì‹
- Temperatureì˜ ì˜ë¯¸ë„ í•™ìŠµ(ì´ˆê¸°) â†’ ì¶”ë¡  ë‹¤ì–‘ì„±(í˜„ì¬)ìœ¼ë¡œ ì „ì´ë¨

---

## ğŸ”— ì°¸ê³  ë§í¬

- [Distillation ë…¼ë¬¸ (Hinton, 2015)](https://arxiv.org/abs/1503.02531)
- [DeepSeek-R1 Distillation ì‚¬ë¡€](https://arxiv.org/abs/2501.12948)
- [Knowledge Distillation ë°œí‘œìë£Œ (PPTX)](week3/Knowledge%20Distillation.pptx)